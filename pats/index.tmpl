{% extends "base_frame.tmpl" %}
{% block title %}Me{% endblock %}
{% block main_content %}
  <div class="jumbotron">
    <h1>{{ workspace_name }}</h1>
    <p class="lead">{{ workspace_id }}</p>
    <p><a class="btn btn-lg btn-primary" href="/toggl/update" role="button">更新！</a></p>
  </div>
  <div>
    <h2>Projects</h2>
    <p>
      {% for project in projects %}
	<span>{{ project.name }}, </span>
      {% endfor %}
    </p>
    <h2>Tags</h2>
    <p>
      {% for tag in tags %}
	<span>{{ tag.name }}, </span>
      {% endfor %}
    </p>
    <h2>Time Entries</h2>

    <table class="table table-striped" id="people-list">
      <thead>
	<th>项目</th>
	<th>描述</th>
	<th>开始时间</th>
	<th>持续时间</th>
	<th>标签</th>
      </thead>
      <tbody>
	{% for entry in time_entries %}
	  <tr>
	    <td>
              <span class="label label-info">
                {{ projects_id_dict.get(entry.pid, {}).get("name") }}
              </span>
            </td>
	    <td>{{ entry.description }}</td>
	    <td>{{ entry.start_time }}</td>
	    <td>{{ entry.duration }}</td>
	    <td>
	      {% if entry.tags %}
		{% for tag in entry.tags %}
		  {% if tag %}
		    <code>{{ tag }}</code>
		  {% endif %}
		{% endfor %}
	      {% endif %}
	    </td>
	  </tr>
	{% endfor %}

      </tbody>
    </table>

  </div>
{% endblock %}
